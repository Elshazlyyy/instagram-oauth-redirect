<!DOCTYPE html>
<html>
<head>
  <title>Redirecting...</title>
  <script type="text/javascript">
    function getQueryParams(url) {
      const params = {};
      const parser = document.createElement('a');
      parser.href = url;
      const query = parser.search.substring(1);
      const vars = query.split('&');
      for (let i = 0; i < vars.length; i++) {
        const pair = vars[i].split('=');
        params[pair[0]] = decodeURIComponent(pair[1]);
      }
      return params;
    }

    function redirectToApp() {
      const params = getQueryParams(window.location.href);
      if (params['code']) {
        const redirectUri = `exp://192.168.0.161:8081/--/auth?code=${params['code']}`;
        console.log('Redirect URI:', redirectUri);  // For debugging
        window.location.replace(redirectUri);
      } else {
        console.error('Authorization code not found in URL');
      }
    }

    window.onload = redirectToApp;
  </script>
</head>
<body>
  <p>Redirecting...</p>
</body>
</html>
