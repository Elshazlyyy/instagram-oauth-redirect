<!DOCTYPE html>
<html>
<head>
  <title>Redirecting...</title>
  <script type="text/javascript">
    function getQueryParams(url) {
      const params = {};
      const parser = document.createElement('a');
      parser.href = url;
      const query = parser.search.substring(1);
      const vars = query.split('&');
      for (let i = 0; i < vars.length; i++) {
        const pair = vars[i].split('=');
        params[pair[0]] = decodeURIComponent(pair[1]);
      }
      return params;
    }

    window.onload = function() {
      console.log('Page loaded. Current URL:', window.location.href);
      const params = getQueryParams(window.location.href);
      console.log('Query parameters:', params);

      if (params['code']) {
        const redirectUri = `exp://192.168.8.37:8081/--/auth?code=${params['code']}`;
        console.log('Redirect URI:', redirectUri);
        
        // Create a <p> element to display the redirect URI
        const p = document.createElement('p');
        p.textContent = `Redirect URI: ${redirectUri}`;
        document.body.appendChild(p);

        window.location.replace(redirectUri);
      } else {
        console.error('Authorization code not found in query parameters.');
        
        // Create a <p> element to display the error message
        const p = document.createElement('p');
        p.textContent = 'Authorization code not found in query parameters.';
        document.body.appendChild(p);
      }
    };
  </script>
</head>
<body>
  <p>Redirecting...</p>
</body>
</html>
